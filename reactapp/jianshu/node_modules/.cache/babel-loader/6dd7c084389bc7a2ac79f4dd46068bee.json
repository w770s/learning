{"ast":null,"code":"var _jsxFileName = \"/Users/w770s/learning/reactapp/jianshu/src/common/Header/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport { HeaderWrapper, Logo, Nav, NavItem, Register, Writing, Search, SearchWrapper, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoListItem } from './style';\nimport { actionCreator } from './store'; // index 导入了actionCreator文件\n\nimport { actionCreator as loginActioncreator } from '../../page/login/store';\nimport store from '../../store';\nimport { CSSTransition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport { Link } from \"react-router-dom\";\n\nclass Header extends Component {\n  Getchange(page, endNum, pageList, newList) {\n    for (let i = (page - 1) * 10; i < endNum; i++) {\n      pageList.push(React.createElement(SearchInfoListItem, {\n        key: newList[i],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, newList[i]));\n    }\n  }\n\n  componentDidMount() {\n    // 生命周期函数 不能放在 mapDispatchToProps中\n    store.dispatch(actionCreator.componentMount());\n  }\n\n  SearchSwitch() {\n    const _this$props = this.props,\n          focused = _this$props.focused,\n          total = _this$props.total,\n          page = _this$props.page,\n          totalPage = _this$props.totalPage,\n          list = _this$props.list,\n          mouseIn = _this$props.mouseIn,\n          handelChangePage = _this$props.handelChangePage,\n          handelMouseEnter = _this$props.handelMouseEnter,\n          handelMouseLeave = _this$props.handelMouseLeave;\n    const newList = list.toJS(); // list 是immutable 数组，转化成 js数组 pageList[index]\n\n    const pageList = [];\n\n    if (newList.length) {\n      // ajax 获取到数据在进来 ，防止 key 值报错\n      if (page < totalPage) {\n        this.Getchange(page, page * 10, pageList, newList);\n      } else {\n        this.Getchange(page, total, pageList, newList);\n      }\n    }\n\n    if (focused || mouseIn) {\n      return React.createElement(SearchInfo, {\n        onMouseEnter: handelMouseEnter,\n        onMouseLeave: handelMouseLeave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(SearchInfoTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \"\\u70ED\\u95E8\\u641C\\u7D22\", React.createElement(SearchInfoSwitch, {\n        onClick: () => handelChangePage(page, totalPage, this.spinicon),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        ref: icon => {\n          this.spinicon = icon;\n        },\n        className: \"iconfont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"\\uE746\"), \"\\u6362\\u4E00\\u6279\")), React.createElement(SearchInfoList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, pageList));\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          haslogin = _this$props2.haslogin,\n          focused = _this$props2.focused,\n          handelInputOnBlur = _this$props2.handelInputOnBlur,\n          handelInputOnFocus = _this$props2.handelInputOnFocus,\n          handelLoginout = _this$props2.handelLoginout;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(HeaderWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Logo, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Nav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      className: \"left active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"\\u9996\\u9875\"), React.createElement(NavItem, {\n      className: \"left download\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u4E0B\\u8F7DApp\"), React.createElement(SearchWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(CSSTransition, {\n      in: focused,\n      timeout: 200,\n      classNames: \"slide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Search, {\n      className: focused ? 'focused' : '',\n      onBlur: handelInputOnBlur,\n      onFocus: handelInputOnFocus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    })), React.createElement(\"i\", {\n      className: focused ? 'focused iconfont zoom' : 'iconfont zoom',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"\\uE65E\"), this.SearchSwitch()), !haslogin ? React.createElement(Link, {\n      to: '/login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"\\u767B\\u9646\")) : React.createElement(NavItem, {\n      className: \"right\",\n      onClick: handelLoginout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"\\u9000\\u51FA\"), React.createElement(NavItem, {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"iconfont\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\uE608\"))), React.createElement(Link, {\n      to: \"/writer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Writing, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"iconfont\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"\\uE617\"), \" \\u5199\\u6587\\u7AE0\")), React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Register, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"\\u6CE8\\u518C\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    // focused: state.header.get('focused') // state 是js 对象，header 是immutable 对象 获取store数据不统一， 可以用 redux-immutable\n    focused: state.getIn(['header', 'focused']),\n    //  state.get('header').get('focused') ,state.为immutable对象，可以调用其方法\n    list: state.getIn(['header', 'list']),\n    mouseIn: state.getIn(['header', 'mouseIn']),\n    total: state.getIn(['header', 'total']),\n    page: state.getIn(['header', 'page']),\n    totalPage: state.getIn(['header', 'totalPage']),\n    haslogin: state.getIn(['login', 'haslogin'])\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handelInputOnFocus() {\n      // dispatch(actionCreator.getStaicHeaderAjax()) // redux-thunk\n      dispatch(actionCreator.onInputOnfocus());\n    },\n\n    handelInputOnBlur() {\n      dispatch(actionCreator.onInputOnblur());\n    },\n\n    handelMouseEnter() {\n      dispatch(actionCreator.onMouseEnter());\n    },\n\n    handelMouseLeave() {\n      dispatch(actionCreator.onMouseLeave());\n    },\n\n    handelChangePage(page, totalPage, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle, 10);\n      } else {\n        originAngle = 0;\n      } // spin.style.transform = 'rotate('+(originAngle + 360)+'deg)'\n\n\n      spin.style.transform = \"rotate(\".concat(originAngle + 360, \"deg)\");\n\n      if (page < totalPage) {\n        dispatch(actionCreator.onChangePage(page + 1));\n      } else {\n        dispatch(actionCreator.onChangePage(1));\n      }\n    },\n\n    handelLoginout() {\n      dispatch(loginActioncreator.loginout());\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header); // connect 返回的组件是一个容器组件","map":{"version":3,"sources":["/Users/w770s/learning/reactapp/jianshu/src/common/Header/index.js"],"names":["React","Component","Fragment","HeaderWrapper","Logo","Nav","NavItem","Register","Writing","Search","SearchWrapper","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoListItem","actionCreator","loginActioncreator","store","CSSTransition","connect","Link","Header","Getchange","page","endNum","pageList","newList","i","push","componentDidMount","dispatch","componentMount","SearchSwitch","props","focused","total","totalPage","list","mouseIn","handelChangePage","handelMouseEnter","handelMouseLeave","toJS","length","spinicon","icon","render","haslogin","handelInputOnBlur","handelInputOnFocus","handelLoginout","mapStateToProps","state","getIn","mapDispatchToProps","onInputOnfocus","onInputOnblur","onMouseEnter","onMouseLeave","spin","originAngle","style","transform","replace","parseInt","onChangePage","loginout"],"mappings":"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","sourcesContent":["import React,{ Component, Fragment } from 'react';\nimport {\n    HeaderWrapper,\n    Logo,\n    Nav,\n    NavItem,\n    Register,\n    Writing,\n    Search,\n    SearchWrapper,\n    SearchInfo,\n    SearchInfoTitle,\n    SearchInfoSwitch,\n    SearchInfoList,\n    SearchInfoListItem\n} from './style';\nimport { actionCreator } from './store'; // index 导入了actionCreator文件\nimport { actionCreator as loginActioncreator} from '../../page/login/store'\nimport store from '../../store'\nimport { CSSTransition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport {Link} from \"react-router-dom\";\n\nclass Header extends Component{\n\n    Getchange(page,endNum,pageList,newList){\n        for(let i = (page - 1)*10; i < endNum; i++){\n            pageList.push(\n                <SearchInfoListItem key={newList[i]}>{newList[i]}</SearchInfoListItem>\n            )\n        }\n    }\n\n    componentDidMount(){ // 生命周期函数 不能放在 mapDispatchToProps中\n        store.dispatch(actionCreator.componentMount())\n    }\n\n    SearchSwitch(){\n        const { focused, total, page, totalPage, list, mouseIn, handelChangePage, handelMouseEnter, handelMouseLeave } = this.props\n        const newList = list.toJS() // list 是immutable 数组，转化成 js数组 pageList[index]\n        const pageList = []\n\n        if(newList.length){  // ajax 获取到数据在进来 ，防止 key 值报错\n            if(page<totalPage){\n                this.Getchange(page,page*10,pageList,newList)\n            }\n            else{\n                this.Getchange(page,total,pageList,newList)\n            }\n        }\n\n        if(focused || mouseIn){\n            return(\n                <SearchInfo\n                    onMouseEnter={handelMouseEnter}\n                    onMouseLeave={handelMouseLeave}\n                >\n                    <SearchInfoTitle>\n                        热门搜索\n                        <SearchInfoSwitch\n                            onClick={()=>handelChangePage(page,totalPage,this.spinicon)}\n                        >\n                            <i ref={(icon)=>{this.spinicon = icon}} className='iconfont'>&#xe746;</i>\n                            换一批\n                        </SearchInfoSwitch>\n                    </SearchInfoTitle>\n                    <SearchInfoList>\n                        {pageList}\n                    </SearchInfoList>\n                </SearchInfo>\n            )\n        }\n        else{\n            return null\n        }\n    }\n\n    render() {\n        const {haslogin, focused , handelInputOnBlur, handelInputOnFocus, handelLoginout  } = this.props\n        return(\n            <Fragment>\n                <HeaderWrapper>\n                    <Logo />\n                    <Nav >\n                        <NavItem className='left active'>首页</NavItem>\n                        <NavItem className='left download'>下载App</NavItem>\n                        <SearchWrapper>\n                            <CSSTransition\n                                in={focused}\n                                timeout={200}\n                                classNames=\"slide\"\n                            >\n                                <Search\n                                    className={focused? 'focused' : ''}\n                                    onBlur={handelInputOnBlur}\n                                    onFocus={handelInputOnFocus}\n                                />\n                            </CSSTransition>\n                            <i className={focused? 'focused iconfont zoom' : 'iconfont zoom'}>&#xe65e;</i>\n                            {this.SearchSwitch()}\n                        </SearchWrapper>\n                            {\n                                !haslogin?\n                                <Link to={'/login'}>\n                                    <NavItem className='right'>登陆</NavItem>\n                                </Link>:\n                                <NavItem className='right' onClick={handelLoginout}>退出</NavItem>\n                            }\n                        <NavItem className='right'>\n                            <i className='iconfont'>&#xe608;</i>\n                        </NavItem>\n                    </Nav>\n                    <Link to='/writer'>\n                        <Writing>\n                            <i className='iconfont'>&#xe617;</i> 写文章\n                        </Writing>\n                    </Link>\n                    <Link to='/login'>\n                        <Register>注册</Register>\n                    </Link>\n                </HeaderWrapper>\n            </Fragment>\n        )\n    }\n}\nconst mapStateToProps = (state) =>{\n    return{\n        // focused: state.header.get('focused') // state 是js 对象，header 是immutable 对象 获取store数据不统一， 可以用 redux-immutable\n        focused: state.getIn(['header','focused']), //  state.get('header').get('focused') ,state.为immutable对象，可以调用其方法\n        list: state.getIn(['header','list']),\n        mouseIn: state.getIn(['header','mouseIn']),\n        total: state.getIn(['header','total']),\n        page: state.getIn(['header','page']),\n        totalPage: state.getIn(['header','totalPage']),\n        haslogin: state.getIn(['login','haslogin'])\n    }\n}\n\nconst mapDispatchToProps = (dispatch)=>{\n    return{\n        handelInputOnFocus(){\n            // dispatch(actionCreator.getStaicHeaderAjax()) // redux-thunk\n            dispatch(actionCreator.onInputOnfocus())\n        },\n        handelInputOnBlur(){\n            dispatch(actionCreator.onInputOnblur())\n        },\n        handelMouseEnter(){\n            dispatch(actionCreator.onMouseEnter())\n        },\n        handelMouseLeave(){\n            dispatch(actionCreator.onMouseLeave())\n        },\n        handelChangePage(page,totalPage,spin){\n            let originAngle = spin.style.transform.replace(/[^0-9]/ig,'')\n            if(originAngle){\n                originAngle = parseInt(originAngle,10)\n            }\n            else{\n                originAngle = 0\n            }\n            // spin.style.transform = 'rotate('+(originAngle + 360)+'deg)'\n            spin.style.transform = `rotate(${originAngle+360}deg)`\n            if(page<totalPage){\n                dispatch(actionCreator.onChangePage(page + 1))\n            }\n            else{\n                dispatch(actionCreator.onChangePage(1))\n            }\n        },\n        handelLoginout(){\n            dispatch(loginActioncreator.loginout())\n        }\n    }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Header) // connect 返回的组件是一个容器组件\n"]},"metadata":{},"sourceType":"module"}